(self.webpackChunkFB_App=self.webpackChunkFB_App||[]).push([[4382],{4382:(t,e,r)=>{"use strict";r.r(e),r.d(e,{PedidoPageModule:()=>q});var i=r(6274),n=r(4988),o=r(8620),a=r(8895),c=r(1855),d=r(7272),s=r(5136),g=r(3883);function l(t,e){1&t&&(d.TgZ(0,"h2"),d._uU(1," Nothing in the order"),d.qZA())}function u(t,e){if(1&t&&(d.TgZ(0,"ion-row",18),d.TgZ(1,"p"),d._uU(2),d.qZA(),d.qZA()),2&t){const t=e.$implicit;d.xp6(2),d.Oqu(t.name)}}function p(t,e){if(1&t&&(d.TgZ(0,"ion-row"),d.TgZ(1,"p"),d.TgZ(2,"strong"),d._uU(3),d.qZA(),d.qZA(),d.qZA()),2&t){const t=d.oxw().$implicit;d.xp6(3),d.Oqu(t.allergyOrPreference)}}function h(t,e){if(1&t){const t=d.EpF();d.TgZ(0,"ion-icon",28),d.NdJ("click",function(e){return d.CHM(t),d.oxw(3).onClickRemove(e)}),d.qZA()}if(2&t){const t=d.oxw().$implicit;d.s9C("id",t.idLine)}}function m(t,e){if(1&t){const t=d.EpF();d.TgZ(0,"ion-icon",29),d.NdJ("click",function(e){return d.CHM(t),d.oxw(3).onClickRemove(e)}),d.qZA()}if(2&t){const t=d.oxw().$implicit;d.s9C("id",t.idLine)}}function Z(t,e){if(1&t){const t=d.EpF();d.TgZ(0,"ion-row",14),d._UZ(1,"div"),d.TgZ(2,"ion-col",15),d.TgZ(3,"ion-icon",16),d.NdJ("click",function(e){return d.CHM(t),d.oxw(2).onClickAdd(e)}),d.qZA(),d.qZA(),d.TgZ(4,"ion-col",15),d.TgZ(5,"h4"),d._uU(6),d.qZA(),d.qZA(),d.TgZ(7,"ion-col",17),d.TgZ(8,"ion-row",18),d.TgZ(9,"ion-text",19),d.TgZ(10,"h5"),d._uU(11),d.qZA(),d.qZA(),d.qZA(),d.YNc(12,u,3,1,"ion-row",20),d.YNc(13,p,4,1,"ion-row",6),d.qZA(),d.TgZ(14,"ion-col",21),d.TgZ(15,"ion-row"),d.TgZ(16,"ion-col",22),d.TgZ(17,"ion-text",23),d.TgZ(18,"h3",24),d._uU(19),d.ALo(20,"number"),d.qZA(),d.qZA(),d.qZA(),d.TgZ(21,"ion-col",25),d.TgZ(22,"div"),d.YNc(23,h,1,1,"ion-icon",26),d.YNc(24,m,1,1,"ion-icon",27),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.qZA()}if(2&t){const t=e.$implicit;d.xp6(3),d.s9C("id",t.idLine),d.xp6(3),d.hij("",t.amount," x"),d.xp6(5),d.Oqu(t.nameProduct),d.xp6(1),d.Q6J("ngForOf",t.extras),d.xp6(1),d.Q6J("ngIf",null!==t.allergyOrPreference||""!==t.allergyOrPreference),d.xp6(6),d.hij("",d.xi3(20,8,t.price,"1.2-2"),"\u20ac"),d.xp6(4),d.Q6J("ngIf",1===t.amount),d.xp6(1),d.Q6J("ngIf",t.amount>1)}}function f(t,e){if(1&t&&(d.TgZ(0,"ion-grid"),d.YNc(1,Z,25,11,"ion-row",13),d.qZA()),2&t){const t=d.oxw();d.xp6(1),d.Q6J("ngForOf",t.arrOrderLine)}}function O(t,e){if(1&t&&(d.TgZ(0,"h2"),d._uU(1),d.ALo(2,"number"),d.qZA()),2&t){const t=d.oxw();d.xp6(1),d.hij("",d.xi3(2,1,t.cartData.totalPrice,"1.2-2"),"\u20ac")}}const A=[{path:"",component:(()=>{class t{constructor(t,e,r){this.dataService=t,this.router=e,this.toastCtrl=r,this.otiumOrder="otium-order",this.arrOrderLine=[]}ngOnInit(){this.dataService.currendCartData.subscribe(t=>this.cartData=t),this.dataService.currentRestaurantData.subscribe(t=>this.restaurantData=t),this.dataService.currentQrData.subscribe(t=>this.qrData=t),this.loadOrderFromLocalStorage(),console.log("EN PEDIDO -> ",this.arrOrderLine),this.updateViewPriceAndAmount()}saveDataOnLocalStorage(){localStorage.removeItem(this.otiumOrder),localStorage.setItem(this.otiumOrder,JSON.stringify(this.arrOrderLine))}loadOrderFromLocalStorage(){this.otiumOrderIsEmpty()||(this.arrOrderLine=JSON.parse(localStorage.getItem(this.otiumOrder)))}otiumOrderIsEmpty(){return null===localStorage.getItem(this.otiumOrder)}getTotalProductsInOrder(){let t;return t=0,this.arrOrderLine.forEach(e=>{t+=e.amount}),t}getTotalPrice(){let t=0;return this.arrOrderLine.forEach(e=>{t+=e.price}),t}updateViewPriceAndAmount(){this.cartData.totalPrice=this.getTotalPrice(),this.cartData.totalAmount=this.getTotalProductsInOrder(),this.dataService.updateCartData(this.cartData)}updateOrder(){this.reorderIdLineOrder(),this.saveDataOnLocalStorage(),this.loadOrderFromLocalStorage(),this.updateViewPriceAndAmount()}onClickAdd(t){this.arrOrderLine[t.target.id].amount+=1,this.arrOrderLine[t.target.id].price=this.arrOrderLine[t.target.id].unitPrice*this.arrOrderLine[t.target.id].amount,this.updateOrder()}onClickRemove(t){console.log("BORRAR -> ",t.target.id),this.removeUnitOfProduct(t),this.updateOrder()}removeUnitOfProduct(t){this.arrOrderLine[t.target.id].amount>1?(this.arrOrderLine[t.target.id].amount-=1,this.arrOrderLine[t.target.id].price=this.arrOrderLine[t.target.id].unitPrice*this.arrOrderLine[t.target.id].amount):this.arrOrderLine.splice(t.target.id,1)}reorderIdLineOrder(){let t=0;this.arrOrderLine.forEach(e=>{e.idLine=t,t++})}goToPago(){return(0,c.mG)(this,void 0,void 0,function*(){this.arrOrderLine.length>0?this.router.navigate(["/pago"]):(yield this.toastCtrl.create({message:"Please choose a product before",duration:2e3})).present()})}}return t.\u0275fac=function(e){return new(e||t)(d.Y36(s.D),d.Y36(a.F0),d.Y36(o.yF))},t.\u0275cmp=d.Xpm({type:t,selectors:[["app-pedido"]],decls:24,vars:5,consts:[[3,"imgHeader"],["mode","md",1,"flex-container"],["mode","md",1,"ion-padding"],["expand","block","shape","round","color","primary"],[2,"text-align","center","padding-top","1.25rem"],["scroll-x","true"],[4,"ngIf"],["mode","md"],["color","primary",1,"ion-text-center"],[1,"flex-button"],[3,"click"],["expand","block","shape","round","color","primary","size","large"],[1,"ion-text-center","ion-padding"],["class","ion-margin-bottom",4,"ngFor","ngForOf"],[1,"ion-margin-bottom"],["size","1.5",1,"center-content"],["name","add-circle-outline","color","success",3,"id","click"],["size","6",1,"center-content"],["size","12"],["color","primary"],["size","12",4,"ngFor","ngForOf"],["size","3",1,"center-content"],["size","8",1,"center-content"],["color","primary",1,"ion-text-right"],[2,"font-size","16px"],["size","4",1,"center-content"],["slot","icon-only","name","trash","color","danger",3,"id","click",4,"ngIf"],["name","remove-circle-outline","color","danger",3,"id","click",4,"ngIf"],["slot","icon-only","name","trash","color","danger",3,"id","click"],["name","remove-circle-outline","color","danger",3,"id","click"]],template:function(t,e){1&t&&(d.TgZ(0,"ion-header"),d._UZ(1,"app-header",0),d.qZA(),d.TgZ(2,"ion-content",1),d.TgZ(3,"ion-card",2),d.TgZ(4,"ion-card-header"),d.TgZ(5,"ion-button",3),d._uU(6),d.qZA(),d.TgZ(7,"div",4),d.TgZ(8,"ion-title"),d._uU(9,"Order"),d.qZA(),d.qZA(),d.qZA(),d.TgZ(10,"ion-card-content",5),d.YNc(11,l,2,0,"h2",6),d.YNc(12,f,2,1,"ion-grid",6),d.qZA(),d.qZA(),d.qZA(),d.TgZ(13,"ion-footer"),d.TgZ(14,"ion-toolbar"),d.TgZ(15,"ion-card",7),d.TgZ(16,"ion-text",8),d.YNc(17,O,3,4,"h2",6),d.qZA(),d.TgZ(18,"ion-card-content",9),d.TgZ(19,"div",10),d.NdJ("click",function(){return e.goToPago()}),d.TgZ(20,"ion-button",11),d._uU(21," CONFIRM ORDER "),d.qZA(),d.qZA(),d.qZA(),d.TgZ(22,"ion-card-subtitle",12),d._uU(23,"After confirmming there is no posibility to cancel or change the order"),d.qZA(),d.qZA(),d.qZA(),d.qZA()),2&t&&(d.xp6(1),d.Q6J("imgHeader",e.restaurantData.img),d.xp6(5),d.hij("Table ",e.qrData.table,""),d.xp6(5),d.Q6J("ngIf",0===e.arrOrderLine.length),d.xp6(1),d.Q6J("ngIf",e.arrOrderLine.length>0),d.xp6(5),d.Q6J("ngIf",e.cartData.totalPrice>0))},directives:[o.Gu,g.G,o.W2,o.PM,o.Zi,o.YG,o.wd,o.FN,i.O5,o.fr,o.sr,o.yW,o.tO,o.jY,i.sg,o.Nd,o.wI,o.gu],pipes:[i.JJ],styles:[".center-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:space-around;justify-content:center}.flex-button[_ngcontent-%COMP%]{display:flex;justify-content:space-around}.flex-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:space-between}ion-card-content[_ngcontent-%COMP%]{padding-left:0;padding-right:0}ion-icon[_ngcontent-%COMP%]{height:1.875rem;width:1.875rem;margin-left:.5rem}ion-grid[_ngcontent-%COMP%]{--ion-grid-padding:0px}ion-col[_ngcontent-%COMP%]{--ion-grid-column-padding:0px}"]}),t})()}];let x=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=d.oAB({type:t}),t.\u0275inj=d.cJS({imports:[[a.Bz.forChild(A)],a.Bz]}),t})();var T=r(9258);let q=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=d.oAB({type:t}),t.\u0275inj=d.cJS({imports:[[i.ez,n.u5,o.Pc,x,T.K]]}),t})()}}]);