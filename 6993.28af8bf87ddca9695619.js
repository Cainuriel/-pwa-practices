(self.webpackChunkFB_App=self.webpackChunkFB_App||[]).push([[6993],{9258:(t,e,r)=>{"use strict";r.d(e,{K:()=>n});var i=r(6274),o=r(8620),s=r(7272);let n=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=s.oAB({type:t}),t.\u0275inj=s.cJS({imports:[[i.ez,o.Pc]]}),t})()},3883:(t,e,r)=>{"use strict";r.d(e,{G:()=>g});var i=r(7272),o=r(8620),s=r(8895),n=r(2149),a=r(6274);function c(t,e){1&t&&i._UZ(0,"ion-back-button",8)}function d(t,e){1&t&&i._UZ(0,"ion-button",9)}let g=(()=>{class t{constructor(t,e,r){this.menuController=t,this.router=e,this.databaseService=r,this.arrow=!0}ngOnInit(){"/welcome"!==this.router.url&&"/order-placed"!==this.router.url||(this.arrow=!1),this.databaseService.observableUser.subscribe(t=>this.dataUser=t),this.imgUser=this.dataUser.img,this.pageIconRestaurant="/select"===this.router.url||"/restaurant-menu"===this.router.url||"/pedido"===this.router.url||"/pago"===this.router.url||"/order-placed"===this.router.url||"/detail"===this.router.url,this.dataUser.themeUser&&!this.pageIconRestaurant?this.imgHeader="../../../assets/logos/Otium_Transparet_No Shadow.png":this.pageIconRestaurant||(this.imgHeader="../../../assets/logos/logo_XL.png")}openMenu(){this.menuController.open("header")}}return t.\u0275fac=function(e){return new(e||t)(i.Y36(o._q),i.Y36(s.F0),i.Y36(n.k))},t.\u0275cmp=i.Xpm({type:t,selectors:[["app-header"]],inputs:{imgHeader:"imgHeader",imgUser:"imgUser"},decls:9,vars:4,consts:[["mode","md"],["slot","start"],["defaultHref","/","color","primary",4,"ngIf"],["style","width: 48px; margin: 0;",4,"ngIf"],[1,"img-otium",3,"src"],["slot","end"],[3,"click"],[1,"avatar",3,"src"],["defaultHref","/","color","primary"],[2,"width","48px","margin","0"]],template:function(t,e){1&t&&(i.TgZ(0,"ion-header",0),i.TgZ(1,"ion-toolbar"),i.TgZ(2,"ion-buttons",1),i.YNc(3,c,1,0,"ion-back-button",2),i.YNc(4,d,1,0,"ion-button",3),i.qZA(),i._UZ(5,"ion-img",4),i.TgZ(6,"ion-buttons",5),i.TgZ(7,"ion-avatar",6),i.NdJ("click",function(){return e.openMenu()}),i._UZ(8,"img",7),i.qZA(),i.qZA(),i.qZA(),i.qZA()),2&t&&(i.xp6(3),i.Q6J("ngIf",e.arrow),i.xp6(1),i.Q6J("ngIf",!e.arrow),i.xp6(1),i.s9C("src",e.imgHeader),i.xp6(3),i.s9C("src",e.imgUser,i.LSH))},directives:[o.Gu,o.sr,o.Sm,a.O5,o.Xz,o.BJ,o.oU,o.cs,o.YG],styles:[".img-otium[_ngcontent-%COMP%]{height:50px;margin:5px auto}.avatar[_ngcontent-%COMP%]{width:72%;height:72%;margin-top:10px;margin-right:18px}"]}),t})()},6993:(t,e,r)=>{"use strict";r.r(e),r.d(e,{OrdersPageModule:()=>y});var i=r(6274),o=r(4988),s=r(8620),n=r(8895),a=r(7272),c=r(5136),d=r(2149),g=r(6880),l=r(3883),u=r(1855),p=r(630);function h(t,e){if(1&t){const t=a.EpF();a.TgZ(0,"ion-item"),a.TgZ(1,"ion-grid",3),a.NdJ("click",function(){const e=a.CHM(t).$implicit;return a.oxw(2).loadOrderFromDatabase(e.path,e.idOrder)}),a.TgZ(2,"ion-row"),a.TgZ(3,"ion-col",4),a._UZ(4,"ion-img",5),a.qZA(),a.TgZ(5,"ion-col",6),a.TgZ(6,"ion-card-header",7),a.TgZ(7,"ion-card-title",8),a._uU(8),a.qZA(),a.TgZ(9,"ion-card-subtitle"),a._uU(10),a.ALo(11,"date"),a.qZA(),a.TgZ(12,"ion-card-content",9),a.TgZ(13,"ion-label"),a._uU(14,"Order state: "),a.TgZ(15,"strong"),a._uU(16),a.qZA(),a.qZA(),a.TgZ(17,"ion-label"),a._uU(18),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.qZA()}if(2&t){const t=e.$implicit,r=a.oxw(2);a.xp6(4),a.s9C("src",t.imgRestaurant),a.xp6(4),a.Oqu(t.nameRestaurant),a.xp6(2),a.Oqu(a.xi3(11,5,r.commonService.dateFirestoreToDate(t.dateOrder),"d MMM, y, h:mm:ss a")),a.xp6(6),a.Oqu(t.state),a.xp6(2),a.hij("Price: ",t.totalPrice,"\u20ac")}}function m(t,e){if(1&t&&(a.TgZ(0,"ion-card",1),a.YNc(1,h,19,8,"ion-item",2),a.qZA()),2&t){const t=a.oxw();a.xp6(1),a.Q6J("ngForOf",t.orders)}}let f=(()=>{class t{constructor(t,e,r){this.commonService=t,this.dataService=e,this.modalCtrl=r,this.orders=[]}ngOnInit(){}loadOrderFromDatabase(t,e){let r=!1;this.dataService.getRestaurantOrder(t,e).then(t=>t.subscribe(t=>{this.dataService.updateOrder(t),console.log("DATOS DEL PEDIDO ACTUAL-> ",t),r||(this.mostrarModal(),r=!0)}))}mostrarModal(){return(0,u.mG)(this,void 0,void 0,function*(){const t=yield this.modalCtrl.create({component:p.t});yield t.present()})}}return t.\u0275fac=function(e){return new(e||t)(a.Y36(g.v),a.Y36(c.D),a.Y36(s.IN))},t.\u0275cmp=a.Xpm({type:t,selectors:[["app-card-orders"]],inputs:{orders:"orders"},decls:1,vars:1,consts:[["mode","ios",4,"ngIf"],["mode","ios"],[4,"ngFor","ngForOf"],["fixed","",3,"click"],["size","3",1,"container-img"],[1,"img-logo",3,"src"],["size","9"],[1,"ion-no-padding","margin-bottom","margin"],[1,"margin-bottom"],[1,"ion-no-padding"]],template:function(t,e){1&t&&a.YNc(0,m,2,1,"ion-card",0),2&t&&a.Q6J("ngIf",void 0!==e.orders)},directives:[i.O5,s.PM,i.sg,s.Ie,s.jY,s.Nd,s.wI,s.Xz,s.Zi,s.gZ,s.tO,s.FN,s.Q$],pipes:[i.uU],styles:[".img-logo[_ngcontent-%COMP%]{width:48px;display:block}.container-img[_ngcontent-%COMP%]{display:flex;align-items:center}ion-row[_ngcontent-%COMP%]{--ion-grid-padding:0px}ion-col[_ngcontent-%COMP%]{--ion-grid-column-padding:0px}.margin-bottom[_ngcontent-%COMP%]{margin-bottom:.625rem}.flex-center[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center}"]}),t})();function Z(t,e){if(1&t&&(a.TgZ(0,"div"),a.TgZ(1,"ion-text",1),a.TgZ(2,"h1"),a._uU(3,"Today's orders"),a.qZA(),a.qZA(),a._UZ(4,"app-card-orders",3),a.qZA()),2&t){const t=a.oxw();a.xp6(4),a.Q6J("orders",t.ordersToday)}}function x(t,e){1&t&&(a.TgZ(0,"h3",4),a._uU(1,"No orders have been placed today"),a.qZA())}function O(t,e){if(1&t&&a._UZ(0,"app-card-orders",3),2&t){const t=a.oxw(2);a.Q6J("orders",t.ordersHistoric)}}function b(t,e){if(1&t){const t=a.EpF();a.TgZ(0,"div"),a.TgZ(1,"ion-button",5),a.NdJ("click",function(){return a.CHM(t),a.oxw().toggleSeeHistoric()}),a._uU(2),a.qZA(),a.YNc(3,O,1,1,"app-card-orders",6),a.qZA()}if(2&t){const t=a.oxw();a.xp6(2),a.hij(" ",t.txtBtnHistoric," "),a.xp6(1),a.Q6J("ngIf",t.seeHistoric)}}const T=[{path:"",component:(()=>{class t{constructor(t,e,r,i){this.dataService=t,this.databaseService=e,this.modalCtrl=r,this.commonService=i,this.orders=[],this.seeHistoric=!1,this.txtBtnHistoric="See Historic"}ngOnInit(){this.databaseService.observableUser.subscribe(t=>this.dataUser=t),this.dataService.currentOrdersPath.subscribe(t=>this.ordersPath=t),this.loadOrdersFromOneRestaurant()}loadOrdersFromOneRestaurant(){this.dataService.getRestaurantUserOrdersFromOneRestaurantOrderBy(this.ordersPath,"dateOrder","desc").then(t=>t.subscribe(t=>{this.orders=t,this.filterOrders()}))}filterOrders(){this.ordersToday=[],this.ordersHistoric=[],this.orders.forEach(t=>{this.commonService.orderFromToday(t.dateOrder)?this.ordersToday.push(t):this.ordersHistoric.push(t)})}toggleSeeHistoric(){this.seeHistoric=!this.seeHistoric,this.changeTextBtnHistoric()}changeTextBtnHistoric(){this.txtBtnHistoric="See Historic"===this.txtBtnHistoric?"Hide Historic":"See Historic"}}return t.\u0275fac=function(e){return new(e||t)(a.Y36(c.D),a.Y36(d.k),a.Y36(s.IN),a.Y36(g.v))},t.\u0275cmp=a.Xpm({type:t,selectors:[["app-orders"]],decls:6,vars:3,consts:[[4,"ngIf"],["color","primary",1,"flex-center"],["class","ion-padding-start",4,"ngIf"],[3,"orders"],[1,"ion-padding-start"],["expand","block","fill","outline","shape","round",1,"ion-margin-top","ion-padding-horizontal",3,"click"],[3,"orders",4,"ngIf"]],template:function(t,e){1&t&&(a._UZ(0,"app-header"),a.TgZ(1,"ion-content"),a.YNc(2,Z,5,1,"div",0),a.TgZ(3,"ion-text",1),a.YNc(4,x,2,0,"h3",2),a.qZA(),a.YNc(5,b,4,2,"div",0),a.qZA()),2&t&&(a.xp6(2),a.Q6J("ngIf",e.ordersToday&&e.ordersToday.length>0),a.xp6(2),a.Q6J("ngIf",e.ordersToday&&0===e.ordersToday.length),a.xp6(1),a.Q6J("ngIf",e.ordersHistoric&&e.ordersHistoric.length>0))},directives:[l.G,s.W2,i.O5,s.yW,f,s.YG],styles:[".flex-center[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center}"]}),t})()}];let v=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=a.oAB({type:t}),t.\u0275inj=a.cJS({imports:[[n.Bz.forChild(T)],n.Bz]}),t})();var A=r(9258);let y=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=a.oAB({type:t}),t.\u0275inj=a.cJS({imports:[[i.ez,o.u5,s.Pc,v,A.K]]}),t})()}}]);