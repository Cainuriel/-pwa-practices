(self.webpackChunkFB_App=self.webpackChunkFB_App||[]).push([[4382],{9258:(t,r,e)=>{"use strict";e.d(r,{K:()=>a});var i=e(6274),n=e(8620),o=e(7272);let a=(()=>{class t{}return t.\u0275fac=function(r){return new(r||t)},t.\u0275mod=o.oAB({type:t}),t.\u0275inj=o.cJS({imports:[[i.ez,n.Pc]]}),t})()},3883:(t,r,e)=>{"use strict";e.d(r,{G:()=>g});var i=e(7272),n=e(8620),o=e(8895),a=e(2149),c=e(6274);function s(t,r){1&t&&i._UZ(0,"ion-back-button",8)}function d(t,r){1&t&&i._UZ(0,"ion-button",9)}let g=(()=>{class t{constructor(t,r,e){this.menuController=t,this.router=r,this.databaseService=e,this.arrow=!0}ngOnInit(){"/welcome"!==this.router.url&&"/order-placed"!==this.router.url||(this.arrow=!1),this.databaseService.observableUser.subscribe(t=>this.dataUser=t),this.imgUser=this.dataUser.img,this.pageIconRestaurant="/select"===this.router.url||"/restaurant-menu"===this.router.url||"/pedido"===this.router.url||"/pago"===this.router.url||"/order-placed"===this.router.url||"/detail"===this.router.url,this.dataUser.themeUser&&!this.pageIconRestaurant?this.imgHeader="../../../assets/logos/Otium_Transparet_No Shadow.png":this.pageIconRestaurant||(this.imgHeader="../../../assets/logos/logo_XL.png")}openMenu(){this.menuController.open("header")}}return t.\u0275fac=function(r){return new(r||t)(i.Y36(n._q),i.Y36(o.F0),i.Y36(a.k))},t.\u0275cmp=i.Xpm({type:t,selectors:[["app-header"]],inputs:{imgHeader:"imgHeader",imgUser:"imgUser"},decls:9,vars:4,consts:[["mode","md"],["slot","start"],["defaultHref","/","color","primary",4,"ngIf"],["style","width: 48px; margin: 0;",4,"ngIf"],[1,"img-otium",3,"src"],["slot","end"],[3,"click"],[1,"avatar",3,"src"],["defaultHref","/","color","primary"],[2,"width","48px","margin","0"]],template:function(t,r){1&t&&(i.TgZ(0,"ion-header",0),i.TgZ(1,"ion-toolbar"),i.TgZ(2,"ion-buttons",1),i.YNc(3,s,1,0,"ion-back-button",2),i.YNc(4,d,1,0,"ion-button",3),i.qZA(),i._UZ(5,"ion-img",4),i.TgZ(6,"ion-buttons",5),i.TgZ(7,"ion-avatar",6),i.NdJ("click",function(){return r.openMenu()}),i._UZ(8,"img",7),i.qZA(),i.qZA(),i.qZA(),i.qZA()),2&t&&(i.xp6(3),i.Q6J("ngIf",r.arrow),i.xp6(1),i.Q6J("ngIf",!r.arrow),i.xp6(1),i.s9C("src",r.imgHeader),i.xp6(3),i.s9C("src",r.imgUser,i.LSH))},directives:[n.Gu,n.sr,n.Sm,c.O5,n.Xz,n.BJ,n.oU,n.cs,n.YG],styles:[".img-otium[_ngcontent-%COMP%]{height:50px;margin:5px auto}.avatar[_ngcontent-%COMP%]{width:72%;height:72%;margin-top:10px;margin-right:18px}"]}),t})()},4382:(t,r,e)=>{"use strict";e.r(r),e.d(r,{PedidoPageModule:()=>q});var i=e(6274),n=e(4988),o=e(8620),a=e(8895),c=e(1855),s=e(7272),d=e(5136),g=e(3883);function u(t,r){1&t&&(s.TgZ(0,"h2"),s._uU(1," Nothing in the order"),s.qZA())}function l(t,r){if(1&t&&(s.TgZ(0,"ion-row",18),s.TgZ(1,"p"),s._uU(2),s.qZA(),s.qZA()),2&t){const t=r.$implicit;s.xp6(2),s.Oqu(t.name)}}function p(t,r){if(1&t&&(s.TgZ(0,"ion-row"),s.TgZ(1,"p"),s.TgZ(2,"strong"),s._uU(3),s.qZA(),s.qZA(),s.qZA()),2&t){const t=s.oxw().$implicit;s.xp6(3),s.Oqu(t.allergyOrPreference)}}function h(t,r){if(1&t){const t=s.EpF();s.TgZ(0,"ion-icon",28),s.NdJ("click",function(r){return s.CHM(t),s.oxw(3).onClickRemove(r)}),s.qZA()}if(2&t){const t=s.oxw().$implicit;s.s9C("id",t.idLine)}}function m(t,r){if(1&t){const t=s.EpF();s.TgZ(0,"ion-icon",29),s.NdJ("click",function(r){return s.CHM(t),s.oxw(3).onClickRemove(r)}),s.qZA()}if(2&t){const t=s.oxw().$implicit;s.s9C("id",t.idLine)}}function Z(t,r){if(1&t){const t=s.EpF();s.TgZ(0,"ion-row",14),s._UZ(1,"div"),s.TgZ(2,"ion-col",15),s.TgZ(3,"ion-icon",16),s.NdJ("click",function(r){return s.CHM(t),s.oxw(2).onClickAdd(r)}),s.qZA(),s.qZA(),s.TgZ(4,"ion-col",15),s.TgZ(5,"h4"),s._uU(6),s.qZA(),s.qZA(),s.TgZ(7,"ion-col",17),s.TgZ(8,"ion-row",18),s.TgZ(9,"ion-text",19),s.TgZ(10,"h5"),s._uU(11),s.qZA(),s.qZA(),s.qZA(),s.YNc(12,l,3,1,"ion-row",20),s.YNc(13,p,4,1,"ion-row",6),s.qZA(),s.TgZ(14,"ion-col",21),s.TgZ(15,"ion-row"),s.TgZ(16,"ion-col",22),s.TgZ(17,"ion-text",23),s.TgZ(18,"h3",24),s._uU(19),s.ALo(20,"number"),s.qZA(),s.qZA(),s.qZA(),s.TgZ(21,"ion-col",25),s.TgZ(22,"div"),s.YNc(23,h,1,1,"ion-icon",26),s.YNc(24,m,1,1,"ion-icon",27),s.qZA(),s.qZA(),s.qZA(),s.qZA(),s.qZA()}if(2&t){const t=r.$implicit;s.xp6(3),s.s9C("id",t.idLine),s.xp6(3),s.hij("",t.amount," x"),s.xp6(5),s.Oqu(t.nameProduct),s.xp6(1),s.Q6J("ngForOf",t.extras),s.xp6(1),s.Q6J("ngIf",null!==t.allergyOrPreference||""!==t.allergyOrPreference),s.xp6(6),s.hij("",s.xi3(20,8,t.price,"1.2-2"),"\u20ac"),s.xp6(4),s.Q6J("ngIf",1===t.amount),s.xp6(1),s.Q6J("ngIf",t.amount>1)}}function f(t,r){if(1&t&&(s.TgZ(0,"ion-grid"),s.YNc(1,Z,25,11,"ion-row",13),s.qZA()),2&t){const t=s.oxw();s.xp6(1),s.Q6J("ngForOf",t.arrOrderLine)}}function O(t,r){if(1&t&&(s.TgZ(0,"h2"),s._uU(1),s.ALo(2,"number"),s.qZA()),2&t){const t=s.oxw();s.xp6(1),s.hij("",s.xi3(2,1,t.cartData.totalPrice,"1.2-2"),"\u20ac")}}const A=[{path:"",component:(()=>{class t{constructor(t,r,e){this.dataService=t,this.router=r,this.toastCtrl=e,this.otiumOrder="otium-order",this.arrOrderLine=[]}ngOnInit(){this.dataService.currendCartData.subscribe(t=>this.cartData=t),this.dataService.currentRestaurantData.subscribe(t=>this.restaurantData=t),this.dataService.currentQrData.subscribe(t=>this.qrData=t),this.loadOrderFromLocalStorage(),console.log("EN PEDIDO -> ",this.arrOrderLine),this.updateViewPriceAndAmount()}saveDataOnLocalStorage(){localStorage.removeItem(this.otiumOrder),localStorage.setItem(this.otiumOrder,JSON.stringify(this.arrOrderLine))}loadOrderFromLocalStorage(){this.otiumOrderIsEmpty()||(this.arrOrderLine=JSON.parse(localStorage.getItem(this.otiumOrder)))}otiumOrderIsEmpty(){return null===localStorage.getItem(this.otiumOrder)}getTotalProductsInOrder(){let t;return t=0,this.arrOrderLine.forEach(r=>{t+=r.amount}),t}getTotalPrice(){let t=0;return this.arrOrderLine.forEach(r=>{t+=r.price}),t}updateViewPriceAndAmount(){this.cartData.totalPrice=this.getTotalPrice(),this.cartData.totalAmount=this.getTotalProductsInOrder(),this.dataService.updateCartData(this.cartData)}updateOrder(){this.reorderIdLineOrder(),this.saveDataOnLocalStorage(),this.loadOrderFromLocalStorage(),this.updateViewPriceAndAmount()}onClickAdd(t){this.arrOrderLine[t.target.id].amount+=1,this.arrOrderLine[t.target.id].price=this.arrOrderLine[t.target.id].unitPrice*this.arrOrderLine[t.target.id].amount,this.updateOrder()}onClickRemove(t){console.log("BORRAR -> ",t.target.id),this.removeUnitOfProduct(t),this.updateOrder()}removeUnitOfProduct(t){this.arrOrderLine[t.target.id].amount>1?(this.arrOrderLine[t.target.id].amount-=1,this.arrOrderLine[t.target.id].price=this.arrOrderLine[t.target.id].unitPrice*this.arrOrderLine[t.target.id].amount):this.arrOrderLine.splice(t.target.id,1)}reorderIdLineOrder(){let t=0;this.arrOrderLine.forEach(r=>{r.idLine=t,t++})}goToPago(){return(0,c.mG)(this,void 0,void 0,function*(){this.arrOrderLine.length>0?this.router.navigate(["/pago"]):(yield this.toastCtrl.create({message:"Please choose a product before",duration:2e3})).present()})}}return t.\u0275fac=function(r){return new(r||t)(s.Y36(d.D),s.Y36(a.F0),s.Y36(o.yF))},t.\u0275cmp=s.Xpm({type:t,selectors:[["app-pedido"]],decls:24,vars:5,consts:[[3,"imgHeader"],["mode","md",1,"flex-container"],["mode","md",1,"ion-padding"],["expand","block","shape","round","color","primary"],[2,"text-align","center","padding-top","1.25rem"],["scroll-x","true"],[4,"ngIf"],["mode","md"],["color","primary",1,"ion-text-center"],[1,"flex-button"],[3,"click"],["expand","block","shape","round","color","primary","size","large"],[1,"ion-text-center","ion-padding"],["class","ion-margin-bottom",4,"ngFor","ngForOf"],[1,"ion-margin-bottom"],["size","1.5",1,"center-content"],["name","add-circle-outline","color","success",3,"id","click"],["size","6",1,"center-content"],["size","12"],["color","primary"],["size","12",4,"ngFor","ngForOf"],["size","3",1,"center-content"],["size","8",1,"center-content"],["color","primary",1,"ion-text-right"],[2,"font-size","16px"],["size","4",1,"center-content"],["slot","icon-only","name","trash","color","danger",3,"id","click",4,"ngIf"],["name","remove-circle-outline","color","danger",3,"id","click",4,"ngIf"],["slot","icon-only","name","trash","color","danger",3,"id","click"],["name","remove-circle-outline","color","danger",3,"id","click"]],template:function(t,r){1&t&&(s.TgZ(0,"ion-header"),s._UZ(1,"app-header",0),s.qZA(),s.TgZ(2,"ion-content",1),s.TgZ(3,"ion-card",2),s.TgZ(4,"ion-card-header"),s.TgZ(5,"ion-button",3),s._uU(6),s.qZA(),s.TgZ(7,"div",4),s.TgZ(8,"ion-title"),s._uU(9,"Order"),s.qZA(),s.qZA(),s.qZA(),s.TgZ(10,"ion-card-content",5),s.YNc(11,u,2,0,"h2",6),s.YNc(12,f,2,1,"ion-grid",6),s.qZA(),s.qZA(),s.qZA(),s.TgZ(13,"ion-footer"),s.TgZ(14,"ion-toolbar"),s.TgZ(15,"ion-card",7),s.TgZ(16,"ion-text",8),s.YNc(17,O,3,4,"h2",6),s.qZA(),s.TgZ(18,"ion-card-content",9),s.TgZ(19,"div",10),s.NdJ("click",function(){return r.goToPago()}),s.TgZ(20,"ion-button",11),s._uU(21," CONFIRM ORDER "),s.qZA(),s.qZA(),s.qZA(),s.TgZ(22,"ion-card-subtitle",12),s._uU(23,"After confirmming there is no posibility to cancel or change the order"),s.qZA(),s.qZA(),s.qZA(),s.qZA()),2&t&&(s.xp6(1),s.Q6J("imgHeader",r.restaurantData.img),s.xp6(5),s.hij("Table ",r.qrData.table,""),s.xp6(5),s.Q6J("ngIf",0===r.arrOrderLine.length),s.xp6(1),s.Q6J("ngIf",r.arrOrderLine.length>0),s.xp6(5),s.Q6J("ngIf",r.cartData.totalPrice>0))},directives:[o.Gu,g.G,o.W2,o.PM,o.Zi,o.YG,o.wd,o.FN,i.O5,o.fr,o.sr,o.yW,o.tO,o.jY,i.sg,o.Nd,o.wI,o.gu],pipes:[i.JJ],styles:[".center-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:space-around;justify-content:center}.flex-button[_ngcontent-%COMP%]{display:flex;justify-content:space-around}.flex-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:space-between}ion-card-content[_ngcontent-%COMP%]{padding-left:0;padding-right:0}ion-icon[_ngcontent-%COMP%]{height:1.875rem;width:1.875rem;margin-left:.5rem}ion-grid[_ngcontent-%COMP%]{--ion-grid-padding:0px}ion-col[_ngcontent-%COMP%]{--ion-grid-column-padding:0px}"]}),t})()}];let x=(()=>{class t{}return t.\u0275fac=function(r){return new(r||t)},t.\u0275mod=s.oAB({type:t}),t.\u0275inj=s.cJS({imports:[[a.Bz.forChild(A)],a.Bz]}),t})();var T=e(9258);let q=(()=>{class t{}return t.\u0275fac=function(r){return new(r||t)},t.\u0275mod=s.oAB({type:t}),t.\u0275inj=s.cJS({imports:[[i.ez,n.u5,o.Pc,x,T.K]]}),t})()}}]);