(self.webpackChunkFB_App=self.webpackChunkFB_App||[]).push([[7541],{9258:(t,r,e)=>{"use strict";e.d(r,{K:()=>n});var i=e(6274),a=e(8620),s=e(7272);let n=(()=>{class t{}return t.\u0275fac=function(r){return new(r||t)},t.\u0275mod=s.oAB({type:t}),t.\u0275inj=s.cJS({imports:[[i.ez,a.Pc]]}),t})()},3883:(t,r,e)=>{"use strict";e.d(r,{G:()=>u});var i=e(7272),a=e(8620),s=e(8895),n=e(2149),o=e(6274);function d(t,r){1&t&&i._UZ(0,"ion-back-button",8)}function c(t,r){1&t&&i._UZ(0,"ion-button",9)}let u=(()=>{class t{constructor(t,r,e){this.menuController=t,this.router=r,this.databaseService=e,this.arrow=!0}ngOnInit(){"/welcome"!==this.router.url&&"/order-placed"!==this.router.url||(this.arrow=!1),this.databaseService.observableUser.subscribe(t=>this.dataUser=t),this.imgUser=this.dataUser.img,this.pageIconRestaurant="/select"===this.router.url||"/restaurant-menu"===this.router.url||"/pedido"===this.router.url||"/pago"===this.router.url||"/order-placed"===this.router.url||"/detail"===this.router.url,this.dataUser.themeUser&&!this.pageIconRestaurant?this.imgHeader="../../../assets/logos/Otium_Transparet_No Shadow.png":this.pageIconRestaurant||(this.imgHeader="../../../assets/logos/logo_XL.png")}openMenu(){this.menuController.open("header")}}return t.\u0275fac=function(r){return new(r||t)(i.Y36(a._q),i.Y36(s.F0),i.Y36(n.k))},t.\u0275cmp=i.Xpm({type:t,selectors:[["app-header"]],inputs:{imgHeader:"imgHeader",imgUser:"imgUser"},decls:9,vars:4,consts:[["mode","md"],["slot","start"],["defaultHref","/","color","primary",4,"ngIf"],["style","width: 48px; margin: 0;",4,"ngIf"],[1,"img-otium",3,"src"],["slot","end"],[3,"click"],[1,"avatar",3,"src"],["defaultHref","/","color","primary"],[2,"width","48px","margin","0"]],template:function(t,r){1&t&&(i.TgZ(0,"ion-header",0),i.TgZ(1,"ion-toolbar"),i.TgZ(2,"ion-buttons",1),i.YNc(3,d,1,0,"ion-back-button",2),i.YNc(4,c,1,0,"ion-button",3),i.qZA(),i._UZ(5,"ion-img",4),i.TgZ(6,"ion-buttons",5),i.TgZ(7,"ion-avatar",6),i.NdJ("click",function(){return r.openMenu()}),i._UZ(8,"img",7),i.qZA(),i.qZA(),i.qZA(),i.qZA()),2&t&&(i.xp6(3),i.Q6J("ngIf",r.arrow),i.xp6(1),i.Q6J("ngIf",!r.arrow),i.xp6(1),i.s9C("src",r.imgHeader),i.xp6(3),i.s9C("src",r.imgUser,i.LSH))},directives:[a.Gu,a.sr,a.Sm,o.O5,a.Xz,a.BJ,a.oU,a.cs,a.YG],styles:[".img-otium[_ngcontent-%COMP%]{height:50px;margin:5px auto}.avatar[_ngcontent-%COMP%]{width:72%;height:72%;margin-top:10px;margin-right:18px}"]}),t})()},7541:(t,r,e)=>{"use strict";e.r(r),e.d(r,{PagoPageModule:()=>U});var i=e(6274),a=e(4988),s=e(8620),n=e(8895),o=e(5517),d=e(9958);class c{constructor(t,r,e,i,a,s,n,o,c,u,h){this.idOrder=t,this.idTable=r,this.idRestaurant=e,this.nameRestaurant=i,this.imgRestaurant=a,this.idUser=s,this.path=n,this.orderLines=o,this.totalPrice=c,this.dateOrder=new Date,this.state=d.Z.received,this.paymentMethod=u,this.estimatedPreparationTime="Pending review",this.tip=h}}var u=e(7272),h=e(1855),l=e(2604);let p=(()=>{class t{constructor(t){this.storage=t,this._storage=null,this._otiumOrders=[],this.init()}get getOtiumOrders(){return[...this._otiumOrders]}init(){return(0,h.mG)(this,void 0,void 0,function*(){const t=yield this.storage.create();this._storage=t,this.loadOrders()})}saveOrder(t,r){return(0,h.mG)(this,void 0,void 0,function*(){this._otiumOrders=[r,...this._otiumOrders],this._storage.set(t,this._otiumOrders)})}loadOrders(){return(0,h.mG)(this,void 0,void 0,function*(){try{const t=yield this._storage.get("otium_orders");this._otiumOrders=t||[]}catch(t){}})}}return t.\u0275fac=function(r){return new(r||t)(u.LFG(l.K))},t.\u0275prov=u.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var g=e(5136),m=e(2149),O=e(3883);function Z(t,r){if(1&t){const t=u.EpF();u.TgZ(0,"ion-button",24),u.NdJ("click",function(){return u.CHM(t),u.oxw().goTopaymentGateway()})("click",function(){return u.CHM(t),u.oxw().saveOrder()}),u._uU(1),u.ALo(2,"number"),u.qZA()}if(2&t){const t=u.oxw();u.xp6(1),u.hij(" PAY ",u.xi3(2,1,t.finalbalance,"1.2-2")," \u20ac\n")}}function b(t,r){if(1&t){const t=u.EpF();u.TgZ(0,"ion-button",24),u.NdJ("click",function(){return u.CHM(t),u.oxw().goTopaymentGateway()})("click",function(){return u.CHM(t),u.oxw().saveRepeatOrder()}),u._uU(1),u.ALo(2,"number"),u.qZA()}if(2&t){const t=u.oxw();u.xp6(1),u.hij(" PAY (REPEAT ORDER) ",u.xi3(2,1,t.finalbalance,"1.2-2")," \u20ac\n")}}const v=[{path:"",component:(()=>{class t{constructor(t,r,e,i){this.router=t,this.storageOrdersService=r,this.dataService=e,this.databaseService=i,this.otiumOrder="otium-order",this.otiumOrders="otium_orders",this.arrOrderLine=[],this.restaurantFromOrdersUsers={array:[]},this.initialbalance=0,this.finalbalance=this.initialbalance,this.percentToGet=10,this.inputTip=0,this.tip=0}ngOnInit(){this.loadOrderFromLocalStorage(),this.showTotalPriceInCart(),this.dataService.currentRestaurantData.subscribe(t=>this.restaurantData=t),this.databaseService.observableUser.subscribe(t=>this.dataUser=t),this.dataService.currentQrData.subscribe(t=>this.qrData=t),this.dataService.currentArrRestaurantsFromOrdersUsers.subscribe(t=>this.restaurantFromOrdersUsers=t),this.dataService.currentOrder.subscribe(t=>{this.repeatOrder=t,void 0!==this.repeatOrder&&this.repeatOrder.idOrder&&(this.restaurantData={id:this.repeatOrder.idRestaurant,name:this.repeatOrder.nameRestaurant,img:this.repeatOrder.imgRestaurant},this.dataService.updateRestaurantData(this.restaurantData),this.initialbalance=this.repeatOrder.totalPrice-this.repeatOrder.tip,this.inputTip=this.repeatOrder.tip,this.tip=this.repeatOrder.tip,this.finalbalance=this.repeatOrder.totalPrice)})}sumTip(){console.log("inputTip ",this.inputTip),this.finalbalance=Number((this.initialbalance+this.inputTip).toFixed(2)),this.tip=this.inputTip}percentage(){this.inputTip=Number((this.percentToGet/100*this.initialbalance).toFixed(2))}loadOrderFromLocalStorage(){this.otiumOrderIsEmpty()||(this.arrOrderLine=JSON.parse(localStorage.getItem(this.otiumOrder)))}otiumOrderIsEmpty(){return null===localStorage.getItem(this.otiumOrder)}showTotalPriceInCart(){this.arrOrderLine.length>0&&(this.initialbalance=this.getTotalPrice(),this.finalbalance=this.initialbalance)}getTotalPrice(){let t=0;return this.arrOrderLine.forEach(r=>{t+=r.price}),console.log("TOTAL PRICE -> ",t),t}goTopaymentGateway(){this.router.navigate(["/payment-gateway"])}saveOrder(){const t=this.databaseService.createNewRandomId(),r=`restaurants/${this.qrData.restaurant}/orders/${this.dataUser.id}/ordersUser-${this.restaurantData.id}`,e=this.createNewOrder(t,r);this.dataService.updateOrder(e),this.dataService.createNewOrder(r,Object.assign({},e),t).then(()=>{console.log("PEDIDO REALIZADO CON EXITO")}),this.saveRestaurantFromOrdersUsers(),localStorage.removeItem(this.otiumOrder)}createNewOrder(t,r){return console.log("ID ORDER -> ",{idOrder:t}),new c(t,this.qrData.table,this.restaurantData.id,this.restaurantData.name,this.restaurantData.img,this.dataUser.id,r,this.arrOrderLine,this.finalbalance,o.X.creditCard,this.tip)}saveRestaurantFromOrdersUsers(t){const r={restaurant:{id:t?t.idRestaurant:this.restaurantData.id,img:t?t.imgRestaurant:this.restaurantData.img,name:t?t.nameRestaurant:this.restaurantData.name},path:t?t.path:`/restaurants/${this.restaurantData.id}/orders/${this.dataUser.id}/ordersUser-${this.restaurantData.id}`,dateLastOrder:new Date};if(console.log("this.restaurantFromOrdersUsers -> ",this.restaurantFromOrdersUsers),void 0!==this.restaurantFromOrdersUsers&&this.restaurantFromOrdersUsers.array===[])this.dataService.saveNewRestaurantInUserOrders("restaurantFromOrdersUsers",{array:[r]},this.dataUser.id);else if(this.restaurantFromOrdersUsers.array.some(t=>t.restaurant.id===r.restaurant.id)){if(this.restaurantFromOrdersUsers.array.some(t=>t.restaurant.id===r.restaurant.id)){const t=this.restaurantFromOrdersUsers.array.findIndex(t=>t.restaurant.id===r.restaurant.id);this.restaurantFromOrdersUsers.array.splice(t,1),this.addOrderInFirstPosition(r)}}else this.addOrderInFirstPosition(r)}addOrderInFirstPosition(t){this.restaurantFromOrdersUsers.array.splice(0,0,t),this.dataService.saveNewRestaurantInUserOrders("restaurantFromOrdersUsers",this.restaurantFromOrdersUsers,this.dataUser.id)}saveRepeatOrder(){this.repeatOrder.dateOrder=new Date,this.repeatOrder.tip=this.inputTip,this.repeatOrder.totalPrice=this.finalbalance,this.dataService.createNewOrder(this.repeatOrder.path,Object.assign({},this.repeatOrder),this.repeatOrder.idOrder).then(()=>{this.saveRestaurantFromOrdersUsers(this.repeatOrder)})}}return t.\u0275fac=function(r){return new(r||t)(u.Y36(n.F0),u.Y36(p),u.Y36(g.D),u.Y36(m.k))},t.\u0275cmp=u.Xpm({type:t,selectors:[["app-pago"]],decls:47,vars:8,consts:[[3,"imgHeader"],["fullscreen","",1,"ion-padding"],["color","success","expand","block","fill","solid","size","large","shape","round",1,"cartbutton"],["slot","start","name","cart-outline"],[1,"margin-top"],["color","primary"],[1,"ion-text-center"],["mode","md"],["value","visa"],["src","../../../assets/icon/visa.png",1,"visa"],["src","../../../assets/icon/mastercard.png",1,"mastercard"],["color","primary",1,"creditcardText"],["slot","start","value","visa"],["slot","start","value","paypal","disabled",""],["slot","start","value","crypto","disabled",""],["slot","start","value","otiums","disabled",""],["color","warning"],[1,"info-Otium"],["color","primary",1,"ion-text-center"],[1,"tip"],["shape","round",3,"click"],["placeholder","Give a tip?","type","number","name","inputTip",1,"ion-text-center",3,"ngModel","ngModelChange"],["shape","round","type","submit",3,"click"],["class","payButton","color","primary","shape","round","expand","block","fill","solid","size","large",3,"click",4,"ngIf"],["color","primary","shape","round","expand","block","fill","solid","size","large",1,"payButton",3,"click"]],template:function(t,r){1&t&&(u.TgZ(0,"ion-header"),u._UZ(1,"app-header",0),u.qZA(),u.TgZ(2,"ion-content",1),u.TgZ(3,"ion-button",2),u._UZ(4,"ion-icon",3),u._uU(5),u.ALo(6,"number"),u.qZA(),u.TgZ(7,"ion-card",4),u.TgZ(8,"ion-card-header"),u.TgZ(9,"ion-card-title",5),u.TgZ(10,"h1",6),u._uU(11,"PAYMENT METHODS"),u.qZA(),u.qZA(),u.qZA(),u.TgZ(12,"ion-card-content"),u.TgZ(13,"ion-list",7),u.TgZ(14,"ion-radio-group",8),u.TgZ(15,"ion-item"),u._UZ(16,"img",9),u._UZ(17,"img",10),u.TgZ(18,"ion-label",11),u._uU(19," CREDIT CARDS"),u.qZA(),u._UZ(20,"ion-radio",12),u.qZA(),u.TgZ(21,"ion-item"),u.TgZ(22,"ion-label",5),u._uU(23,"PAYPAL"),u.qZA(),u._UZ(24,"ion-radio",13),u.qZA(),u.TgZ(25,"ion-item"),u.TgZ(26,"ion-label",5),u._uU(27,"BITCOIN"),u.qZA(),u._UZ(28,"ion-radio",14),u.qZA(),u.TgZ(29,"ion-item"),u.TgZ(30,"ion-label",5),u._uU(31,"OTIUM"),u.qZA(),u._UZ(32,"ion-radio",15),u.TgZ(33,"ion-text",16),u.TgZ(34,"h5",17),u._uU(35,"GET 3% BACK"),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.TgZ(36,"ion-text",18),u.TgZ(37,"h1"),u._uU(38,"TIP"),u.qZA(),u.qZA(),u.TgZ(39,"div",19),u.TgZ(40,"ion-button",20),u.NdJ("click",function(){return r.percentage()}),u._uU(41," 10% "),u.qZA(),u.TgZ(42,"ion-input",21),u.NdJ("ngModelChange",function(t){return r.inputTip=t}),u.qZA(),u.TgZ(43,"ion-button",22),u.NdJ("click",function(){return r.sumTip()}),u._uU(44," Add "),u.qZA(),u.qZA(),u.YNc(45,Z,3,4,"ion-button",23),u.YNc(46,b,3,4,"ion-button",23),u.qZA()),2&t&&(u.xp6(1),u.Q6J("imgHeader",r.restaurantData.img),u.xp6(4),u.hij("",u.xi3(6,5,r.initialbalance,"1.2-2")," \u20ac "),u.xp6(37),u.Q6J("ngModel",r.inputTip),u.xp6(3),u.Q6J("ngIf",void 0===r.repeatOrder),u.xp6(1),u.Q6J("ngIf",void 0!==r.repeatOrder))},directives:[s.Gu,O.G,s.W2,s.YG,s.gu,s.PM,s.Zi,s.gZ,s.FN,s.q_,s.se,s.QI,s.Ie,s.Q$,s.B7,s.U5,s.yW,s.pK,s.as,a.JJ,a.On,i.O5],pipes:[i.JJ],styles:[".info-Otium[_ngcontent-%COMP%]{margin-right:60px}.visa[_ngcontent-%COMP%]{height:48px}.mastercard[_ngcontent-%COMP%]{margin-top:15px;height:48px}.creditcardText[_ngcontent-%COMP%]{margin-top:35px}ion-input[_ngcontent-%COMP%]{border:3px solid var(--ion-color-medium);width:150px!important;color:var(--ion-color-primary);--placeholder-color:var(--ion-color-tertiary)}.payButton[_ngcontent-%COMP%], .tip[_ngcontent-%COMP%]{display:flex;justify-content:space-around}.margin-top[_ngcontent-%COMP%], .payButton[_ngcontent-%COMP%], .tip[_ngcontent-%COMP%]{margin-top:1.875rem}"]}),t})()}];let T=(()=>{class t{}return t.\u0275fac=function(r){return new(r||t)},t.\u0275mod=u.oAB({type:t}),t.\u0275inj=u.cJS({imports:[[n.Bz.forChild(v)],n.Bz]}),t})();var f=e(9258);let U=(()=>{class t{}return t.\u0275fac=function(r){return new(r||t)},t.\u0275mod=u.oAB({type:t}),t.\u0275inj=u.cJS({imports:[[i.ez,a.u5,s.Pc,T,f.K]]}),t})()}}]);