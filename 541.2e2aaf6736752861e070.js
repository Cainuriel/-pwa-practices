(self.webpackChunkFB_App=self.webpackChunkFB_App||[]).push([[541],{541:(e,t,r)=>{"use strict";r.r(t),r.d(t,{PedidoPageModule:()=>q});var i=r(8583),n=r(665),o=r(2859),c=r(430),a=r(4762),d=r(8720),s=r(4474),g=r(3646);function l(e,t){1&e&&(d.TgZ(0,"h2"),d._uU(1," Nothing in the order"),d.qZA())}function u(e,t){if(1&e&&(d.TgZ(0,"ion-row",18),d.TgZ(1,"p"),d._uU(2),d.qZA(),d.qZA()),2&e){const e=t.$implicit;d.xp6(2),d.Oqu(e.name)}}function p(e,t){if(1&e&&(d.TgZ(0,"ion-row"),d.TgZ(1,"p"),d.TgZ(2,"strong"),d._uU(3),d.qZA(),d.qZA(),d.qZA()),2&e){const e=d.oxw().$implicit;d.xp6(3),d.Oqu(e.allergyOrPreference)}}function m(e,t){if(1&e){const e=d.EpF();d.TgZ(0,"ion-icon",28),d.NdJ("click",function(t){return d.CHM(e),d.oxw(3).onClickRemove(t)}),d.qZA()}if(2&e){const e=d.oxw().$implicit;d.s9C("id",e.idLine)}}function Z(e,t){if(1&e){const e=d.EpF();d.TgZ(0,"ion-icon",29),d.NdJ("click",function(t){return d.CHM(e),d.oxw(3).onClickRemove(t)}),d.qZA()}if(2&e){const e=d.oxw().$implicit;d.s9C("id",e.idLine)}}function h(e,t){if(1&e){const e=d.EpF();d.TgZ(0,"ion-row",14),d._UZ(1,"div"),d.TgZ(2,"ion-col",15),d.TgZ(3,"ion-icon",16),d.NdJ("click",function(t){return d.CHM(e),d.oxw(2).onClickAdd(t)}),d.qZA(),d.qZA(),d.TgZ(4,"ion-col",15),d.TgZ(5,"h4"),d._uU(6),d.qZA(),d.qZA(),d.TgZ(7,"ion-col",17),d.TgZ(8,"ion-row",18),d.TgZ(9,"ion-text",19),d.TgZ(10,"h5"),d._uU(11),d.qZA(),d.qZA(),d.qZA(),d.YNc(12,u,3,1,"ion-row",20),d.YNc(13,p,4,1,"ion-row",6),d.qZA(),d.TgZ(14,"ion-col",21),d.TgZ(15,"ion-row"),d.TgZ(16,"ion-col",22),d.TgZ(17,"ion-text",23),d.TgZ(18,"h3",24),d._uU(19),d.ALo(20,"number"),d.qZA(),d.qZA(),d.qZA(),d.TgZ(21,"ion-col",25),d.TgZ(22,"div"),d.YNc(23,m,1,1,"ion-icon",26),d.YNc(24,Z,1,1,"ion-icon",27),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.qZA()}if(2&e){const e=t.$implicit;d.xp6(3),d.s9C("id",e.idLine),d.xp6(3),d.hij("",e.amount," x"),d.xp6(5),d.Oqu(e.nameProduct),d.xp6(1),d.Q6J("ngForOf",e.extras),d.xp6(1),d.Q6J("ngIf",null!==e.allergyOrPreference||""!==e.allergyOrPreference),d.xp6(6),d.hij("",d.xi3(20,8,e.price,"1.2-2"),"\u20ac"),d.xp6(4),d.Q6J("ngIf",1===e.amount),d.xp6(1),d.Q6J("ngIf",e.amount>1)}}function f(e,t){if(1&e&&(d.TgZ(0,"ion-grid"),d.YNc(1,h,25,11,"ion-row",13),d.qZA()),2&e){const e=d.oxw();d.xp6(1),d.Q6J("ngForOf",e.arrOrderLine)}}function O(e,t){if(1&e&&(d.TgZ(0,"h2"),d._uU(1),d.ALo(2,"number"),d.qZA()),2&e){const e=d.oxw();d.xp6(1),d.hij("",d.xi3(2,1,e.cartData.totalPrice,"1.2-2"),"\u20ac")}}const A=[{path:"",component:(()=>{class e{constructor(e,t,r){this.dataService=e,this.router=t,this.toastCtrl=r,this.otiumOrder="otium-order",this.arrOrderLine=[]}ngOnInit(){this.dataService.currendCartData.subscribe(e=>this.cartData=e),this.loadOrderFromLocalStorage(),console.log("EN PEDIDO -> ",this.arrOrderLine),this.updateViewPriceAndAmount()}saveDataOnLocalStorage(){localStorage.removeItem(this.otiumOrder),localStorage.setItem(this.otiumOrder,JSON.stringify(this.arrOrderLine))}loadOrderFromLocalStorage(){this.otiumOrderIsEmpty()||(this.arrOrderLine=JSON.parse(localStorage.getItem(this.otiumOrder)))}otiumOrderIsEmpty(){return null===localStorage.getItem(this.otiumOrder)}getTotalProductsInOrder(){let e;return e=0,this.arrOrderLine.forEach(t=>{e+=t.amount}),e}getTotalPrice(){let e=0;return this.arrOrderLine.forEach(t=>{e+=t.price}),e}updateViewPriceAndAmount(){this.cartData.totalPrice=this.getTotalPrice(),this.cartData.totalAmount=this.getTotalProductsInOrder(),this.dataService.updateCartData(this.cartData)}updateOrder(){this.reorderIdLineOrder(),this.saveDataOnLocalStorage(),this.loadOrderFromLocalStorage(),this.updateViewPriceAndAmount()}onClickAdd(e){this.arrOrderLine[e.target.id].amount+=1,this.arrOrderLine[e.target.id].price=this.arrOrderLine[e.target.id].unitPrice*this.arrOrderLine[e.target.id].amount,this.updateOrder()}onClickRemove(e){console.log("BORRAR -> ",e.target.id),this.removeUnitOfProduct(e),this.updateOrder()}removeUnitOfProduct(e){this.arrOrderLine[e.target.id].amount>1?(this.arrOrderLine[e.target.id].amount-=1,this.arrOrderLine[e.target.id].price=this.arrOrderLine[e.target.id].unitPrice*this.arrOrderLine[e.target.id].amount):this.arrOrderLine.splice(e.target.id,1)}reorderIdLineOrder(){let e=0;this.arrOrderLine.forEach(t=>{t.idLine=e,e++})}goToPago(){return(0,a.mG)(this,void 0,void 0,function*(){this.arrOrderLine.length>0?this.router.navigate(["/pago"]):(yield this.toastCtrl.create({message:"Please choose a product before",duration:2e3})).present()})}}return e.\u0275fac=function(t){return new(t||e)(d.Y36(s.D),d.Y36(c.F0),d.Y36(o.yF))},e.\u0275cmp=d.Xpm({type:e,selectors:[["app-pedido"]],decls:24,vars:3,consts:[["imgHeader","assets/logos-empresas/starbucks-coffee.png"],["mode","md",1,"flex-container"],["mode","md",1,"ion-padding"],["expand","block","shape","round","color","primary"],[2,"text-align","center","padding-top","1.25rem"],["scroll-x","true"],[4,"ngIf"],["mode","md"],["color","primary",1,"ion-text-center"],[1,"flex-button"],[3,"click"],["expand","block","shape","round","color","primary","size","large"],[1,"ion-text-center","ion-padding"],["class","ion-margin-bottom",4,"ngFor","ngForOf"],[1,"ion-margin-bottom"],["size","1.5",1,"center-content"],["name","add-circle-outline","color","success",3,"id","click"],["size","6",1,"center-content"],["size","12"],["color","primary"],["size","12",4,"ngFor","ngForOf"],["size","3",1,"center-content"],["size","8",1,"center-content"],["color","primary",1,"ion-text-right"],[2,"font-size","16px"],["size","4",1,"center-content"],["slot","icon-only","name","trash","color","danger",3,"id","click",4,"ngIf"],["name","remove-circle-outline","color","danger",3,"id","click",4,"ngIf"],["slot","icon-only","name","trash","color","danger",3,"id","click"],["name","remove-circle-outline","color","danger",3,"id","click"]],template:function(e,t){1&e&&(d.TgZ(0,"ion-header"),d._UZ(1,"app-header",0),d.qZA(),d.TgZ(2,"ion-content",1),d.TgZ(3,"ion-card",2),d.TgZ(4,"ion-card-header"),d.TgZ(5,"ion-button",3),d._uU(6,"Table 7"),d.qZA(),d.TgZ(7,"div",4),d.TgZ(8,"ion-title"),d._uU(9,"Order"),d.qZA(),d.qZA(),d.qZA(),d.TgZ(10,"ion-card-content",5),d.YNc(11,l,2,0,"h2",6),d.YNc(12,f,2,1,"ion-grid",6),d.qZA(),d.qZA(),d.qZA(),d.TgZ(13,"ion-footer"),d.TgZ(14,"ion-toolbar"),d.TgZ(15,"ion-card",7),d.TgZ(16,"ion-text",8),d.YNc(17,O,3,4,"h2",6),d.qZA(),d.TgZ(18,"ion-card-content",9),d.TgZ(19,"div",10),d.NdJ("click",function(){return t.goToPago()}),d.TgZ(20,"ion-button",11),d._uU(21," CONFIRM ORDER "),d.qZA(),d.qZA(),d.qZA(),d.TgZ(22,"ion-card-subtitle",12),d._uU(23,"After confirmming there is no posibility to cancel or change the order"),d.qZA(),d.qZA(),d.qZA(),d.qZA()),2&e&&(d.xp6(11),d.Q6J("ngIf",0===t.arrOrderLine.length),d.xp6(1),d.Q6J("ngIf",t.arrOrderLine.length>0),d.xp6(5),d.Q6J("ngIf",t.cartData.totalPrice>0))},directives:[o.Gu,g.G,o.W2,o.PM,o.Zi,o.YG,o.wd,o.FN,i.O5,o.fr,o.sr,o.yW,o.tO,o.jY,i.sg,o.Nd,o.wI,o.gu],pipes:[i.JJ],styles:[".center-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:space-around;justify-content:center}.flex-button[_ngcontent-%COMP%]{display:flex;justify-content:space-around}.flex-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:space-between}ion-card-content[_ngcontent-%COMP%]{padding-left:0;padding-right:0}ion-icon[_ngcontent-%COMP%]{height:1.875rem;width:1.875rem;margin-left:.5rem}ion-grid[_ngcontent-%COMP%]{--ion-grid-padding:0px}ion-col[_ngcontent-%COMP%]{--ion-grid-column-padding:0px}"]}),e})()}];let x=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=d.oAB({type:e}),e.\u0275inj=d.cJS({imports:[[c.Bz.forChild(A)],c.Bz]}),e})();var T=r(5642);let q=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=d.oAB({type:e}),e.\u0275inj=d.cJS({imports:[[i.ez,n.u5,o.Pc,x,T.K]]}),e})()}}]);