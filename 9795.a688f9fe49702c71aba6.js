(self.webpackChunkFB_App=self.webpackChunkFB_App||[]).push([[9795],{9258:(t,e,r)=>{"use strict";r.d(e,{K:()=>i});var a=r(6274),n=r(8620),s=r(7272);let i=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=s.oAB({type:t}),t.\u0275inj=s.cJS({imports:[[a.ez,n.Pc]]}),t})()},3883:(t,e,r)=>{"use strict";r.d(e,{G:()=>l});var a=r(7272),n=r(8620),s=r(8895),i=r(2149),o=r(6274);function u(t,e){1&t&&a._UZ(0,"ion-back-button",8)}function c(t,e){1&t&&a._UZ(0,"ion-button",9)}let l=(()=>{class t{constructor(t,e,r){this.menuController=t,this.router=e,this.databaseService=r,this.arrow=!0}ngOnInit(){"/welcome"!==this.router.url&&"/order-placed"!==this.router.url||(this.arrow=!1),this.databaseService.observableUser.subscribe(t=>this.dataUser=t),this.imgUser=this.dataUser.img,this.pageIconRestaurant="/select"===this.router.url||"/restaurant-menu"===this.router.url||"/pedido"===this.router.url||"/pago"===this.router.url||"/order-placed"===this.router.url||"/detail"===this.router.url,this.dataUser.themeUser&&!this.pageIconRestaurant?this.imgHeader="../../../assets/logos/Otium_Transparet_No Shadow.png":this.pageIconRestaurant||(this.imgHeader="../../../assets/logos/logo_XL.png")}openMenu(){this.menuController.open("header")}}return t.\u0275fac=function(e){return new(e||t)(a.Y36(n._q),a.Y36(s.F0),a.Y36(i.k))},t.\u0275cmp=a.Xpm({type:t,selectors:[["app-header"]],inputs:{imgHeader:"imgHeader",imgUser:"imgUser"},decls:9,vars:4,consts:[["mode","md"],["slot","start"],["defaultHref","/","color","primary",4,"ngIf"],["style","width: 48px; margin: 0;",4,"ngIf"],[1,"img-otium",3,"src"],["slot","end"],[3,"click"],[1,"avatar",3,"src"],["defaultHref","/","color","primary"],[2,"width","48px","margin","0"]],template:function(t,e){1&t&&(a.TgZ(0,"ion-header",0),a.TgZ(1,"ion-toolbar"),a.TgZ(2,"ion-buttons",1),a.YNc(3,u,1,0,"ion-back-button",2),a.YNc(4,c,1,0,"ion-button",3),a.qZA(),a._UZ(5,"ion-img",4),a.TgZ(6,"ion-buttons",5),a.TgZ(7,"ion-avatar",6),a.NdJ("click",function(){return e.openMenu()}),a._UZ(8,"img",7),a.qZA(),a.qZA(),a.qZA(),a.qZA()),2&t&&(a.xp6(3),a.Q6J("ngIf",e.arrow),a.xp6(1),a.Q6J("ngIf",!e.arrow),a.xp6(1),a.s9C("src",e.imgHeader),a.xp6(3),a.s9C("src",e.imgUser,a.LSH))},directives:[n.Gu,n.sr,n.Sm,o.O5,n.Xz,n.BJ,n.oU,n.cs,n.YG],styles:[".img-otium[_ngcontent-%COMP%]{height:50px;margin:5px auto}.avatar[_ngcontent-%COMP%]{width:72%;height:72%;margin-top:10px;margin-right:18px}"]}),t})()},9795:(t,e,r)=>{"use strict";r.r(e),r.d(e,{QrPageModule:()=>p});var a=r(6274),n=r(4988),s=r(8620),i=r(8895),o=r(7272),u=r(9847),c=r(5136),l=r(3883);const d=[{path:"",component:(()=>{class t{constructor(t,e,r){this.barcodeScanner=t,this.dataService=e,this.router=r,this.otiumOrder="otium-order",this.collectionRestaurants="restaurants",this.subcollectionCategories="categories",this.subDocumentItems="items",this.subcollectionProducts="products",this.inputRestaurant="",this.inputTable="",this.disabledButton=!0,this.qrData={restaurant:"",table:""}}ngOnInit(){this.dataService.currentArrRestaurantMenuData.subscribe(t=>this.arrRestaurantMenuData=t),this.dataService.currentArrRestaurantMenuCategory.subscribe(t=>this.arrRestaurantMenuCategory=t),this.dataService.currentQrData.subscribe(t=>this.qrData=t),localStorage.removeItem(this.otiumOrder)}scannQr(){this.barcodeScanner.scan().then(t=>{console.log("Barcode data OTIUM",t.text),this.dataService.updateQrData(JSON.parse(t.text)),console.log("OTIUM this.QrData restaurant y table->",this.qrData.restaurant,this.qrData.table),this.getDataAndForward(this.qrData.restaurant)}).catch(t=>{console.log("Error",t)})}restaurantFromInput(){this.dataService.updateQrData({restaurant:this.inputRestaurant,table:this.inputTable}),this.getDataAndForward(this.inputRestaurant)}getDataAndForward(t){void 0===this.restaurantData||t!==this.restaurantData.id?(this.restaurantCleanData(),this.getDataRestaurant(this.collectionRestaurants,t)):t===this.restaurantData.id&&this.router.navigate(["/select"])}getDataRestaurant(t,e){this.dataService.getRestaurantData(t,e).then(t=>this.restaurantDataSubscription=t.subscribe(t=>{console.log("Datos del restaurante -> ",t),this.restaurantData=t,this.dataService.updateRestaurantData(this.restaurantData),this.restaurantDataSubscription.unsubscribe(),this.restaurantData?(this.getRestaurantCategories(this.collectionRestaurants,e,this.subcollectionCategories,this.subDocumentItems),this.getRestaurantMenu(this.collectionRestaurants,e,this.subcollectionProducts,this.subDocumentItems),this.router.navigate(["/select"])):this.dataService.showErrorRestaurantNotExist()}))}getRestaurantCategories(t,e,r,a){this.dataService.getRestaurantCategories(`${t}/${e}/${r}`,a).then(t=>this.restaurantMenuCategoriesSubscription=t.subscribe(t=>{console.log("DATOS DESDE FIRESTORE categories -> ",t);for(const e in t)null!==t&&this.arrRestaurantMenuCategory.push(t[e]);console.log("DATOS DESDE FIRESTORE arrRestaruantMenuCategory->",this.arrRestaurantMenuCategory),this.dataService.updateArrRestaurantMenuCategory(this.arrRestaurantMenuCategory),this.restaurantMenuCategoriesSubscription.unsubscribe()}))}getRestaurantMenu(t,e,r,a){this.dataService.getRestaurantMenu(`${t}/${e}/${r}`,a).then(t=>this.restaurantMenuDataSubscription=t.subscribe(t=>{console.log("DATOS DESDE FIRESTORE products->",t);for(const e in t)null!==t&&void 0!==t[e].idProduct&&this.arrRestaurantMenuData.push(t[e]);console.log("DATOS DESDE FIRESTORE arrRestaruantMenuData->",this.arrRestaurantMenuData),this.dataService.sortArray(this.arrRestaurantMenuData),this.dataService.updateArrRestaurantMenuData(this.arrRestaurantMenuData),this.restaurantMenuDataSubscription.unsubscribe()}))}verifyInputsToEnableButton(){setTimeout(()=>{this.disabledButton=3!==this.inputTable.length||3!==this.inputRestaurant.length},100)}restaurantCleanData(){this.restaurantData=void 0,this.arrRestaurantMenuCategory=[],this.arrRestaurantMenuData=[]}}return t.\u0275fac=function(e){return new(e||t)(o.Y36(u.m),o.Y36(c.D),o.Y36(i.F0))},t.\u0275cmp=o.Xpm({type:t,selectors:[["app-qr"]],decls:28,vars:3,consts:[[1,"div-content"],[1,"input-content"],["fixed",""],["size","12"],["mode","ios",3,"click"],[1,"ion-text-center"],["color","primary",1,"ion-align-self-center"],[1,"center-img"],["src","../../../assets/img/scan-qr-removebg.png","alt","mapa de google"],["size","12",1,"ion-text-center","margin-top"],["size","6"],["type","text","placeholder","Write restaurant",1,"corners",3,"ngModel","ionInput","ngModelChange"],["type","text","placeholder","Write table",1,"corners",3,"ngModel","ionInput","ngModelChange"],["expand","block","shape","round",1,"corners","margin-top",3,"disabled","click"]],template:function(t,e){1&t&&(o._UZ(0,"app-header"),o.TgZ(1,"ion-content"),o.TgZ(2,"div",0),o.TgZ(3,"div",1),o.TgZ(4,"ion-grid",2),o.TgZ(5,"ion-row"),o.TgZ(6,"ion-col",3),o.TgZ(7,"ion-card",4),o.NdJ("click",function(){return e.scannQr()}),o.TgZ(8,"ion-card-content"),o.TgZ(9,"div",5),o.TgZ(10,"ion-text",6),o.TgZ(11,"h1"),o._uU(12,"Touch and scan the table"),o.qZA(),o.qZA(),o.qZA(),o.TgZ(13,"div",7),o._UZ(14,"img",8),o.qZA(),o.qZA(),o.qZA(),o.qZA(),o.qZA(),o.TgZ(15,"ion-row"),o.TgZ(16,"ion-col",9),o.TgZ(17,"ion-text"),o._uU(18,"Problems with the scan?"),o.qZA(),o.qZA(),o.qZA(),o.TgZ(19,"ion-row"),o.TgZ(20,"ion-col",10),o.TgZ(21,"ion-input",11),o.NdJ("ionInput",function(){return e.verifyInputsToEnableButton()})("ngModelChange",function(t){return e.inputRestaurant=t}),o.qZA(),o.qZA(),o.TgZ(22,"ion-col",10),o.TgZ(23,"ion-input",12),o.NdJ("ionInput",function(){return e.verifyInputsToEnableButton()})("ngModelChange",function(t){return e.inputTable=t}),o.qZA(),o.qZA(),o.qZA(),o.TgZ(24,"ion-row"),o.TgZ(25,"ion-col",3),o.TgZ(26,"ion-button",13),o.NdJ("click",function(){return e.restaurantFromInput()}),o._uU(27," Send "),o.qZA(),o.qZA(),o.qZA(),o.qZA(),o.qZA(),o.qZA(),o.qZA()),2&t&&(o.xp6(21),o.Q6J("ngModel",e.inputRestaurant),o.xp6(2),o.Q6J("ngModel",e.inputTable),o.xp6(3),o.Q6J("disabled",e.disabledButton))},directives:[l.G,s.W2,s.jY,s.Nd,s.wI,s.PM,s.FN,s.yW,s.pK,s.j9,n.JJ,n.On,s.YG],styles:[".div-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;height:90vh;padding-left:1.875rem;padding-right:1.875rem}.corners[_ngcontent-%COMP%]{border-radius:25px;border:2px solid var(--ion-color-tertiary);text-align:center;--placeholder-font-weight:12px!important}.input-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center}ion-card[_ngcontent-%COMP%]{border:1px solid #3c0080;box-shadow:3px 3px 8px #3c0080;border-radius:2.5rem}.center-img[_ngcontent-%COMP%]{display:flex;justify-content:center;padding-bottom:1.25rem}.margin-top[_ngcontent-%COMP%]{margin-top:20px}"]}),t})()}];let g=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=o.oAB({type:t}),t.\u0275inj=o.cJS({imports:[[i.Bz.forChild(d)],i.Bz]}),t})();var h=r(9258);let p=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=o.oAB({type:t}),t.\u0275inj=o.cJS({imports:[[a.ez,n.u5,s.Pc,g,h.K]]}),t})()}}]);